FROM apache/airflow:3.0.6



ENV AIRFLOW__CORE__EXECUTOR=${AIRFLOW__CORE__EXECUTOR:-"CeleryExecutor"}
ENV AIRFLOW__CORE__LOAD_EXAMPLES=${AIRFLOW__CORE__LOAD_EXAMPLES:-"false"}
ENV AIRFLOW__CORE__AUTH_MANAGER=${AIRFLOW__CORE__AUTH_MANAGER:-"airflow.providers.fab.auth_manager.fab_auth_manager.FabAuthManager"}
ENV AIRFLOW__API__EXPOSE_CONFIG=${AIRFLOW__API__EXPOSE_CONFIG:-"false"}
ENV AIRFLOW__API__EXPOSE_STACKTRACE=${AIRFLOW__API__EXPOSE_STACKTRACE:-"false"}
ENV AIRFLOW__CORE__DAGS_ARE_PAUSED_AT_CREATION=${AIRFLOW__CORE__DAGS_ARE_PAUSED_AT_CREATION:-"true"}
ENV AIRFLOW__SCHEDULER__ENABLE_HEALTH_CHECK=${AIRFLOW__SCHEDULER__ENABLE_HEALTH_CHECK:-"true"}
ENV AIRFLOW__CORE__FERNET_KEY=${AIRFLOW__CORE__FERNET_KEY:-"vYgDn-AesJP0QqFphmuOyuX4Qmw0CYeyWjULGiROzmE="}
ENV AIRFLOW__CORE__HOSTNAME_CALLABLE="airflow.utils.net.get_host_ip_address"




USER root
WORKDIR /app


COPY entrypoint.sh .
RUN chmod +x entrypoint.sh
ENTRYPOINT ["./entrypoint.sh"]
